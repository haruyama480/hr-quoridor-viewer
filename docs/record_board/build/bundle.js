var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function r(t){return t()}function i(){return Object.create(null)}function o(t){t.forEach(r)}function l(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e,r,i){return t[1]&&i?n(r.ctx.slice(),t[1](i(e))):r.ctx}const c="undefined"!=typeof window;let u=c?()=>window.performance.now():()=>Date.now(),h=c?t=>requestAnimationFrame(t):t;const d=new Set;function p(t){d.forEach((e=>{e.c(t)||(d.delete(e),e.f())})),0!==d.size&&h(p)}function f(t){let e;return 0===d.size&&h(p),{promise:new Promise((n=>{d.add(e={c:t,f:n})})),abort(){d.delete(e)}}}function w(t,e){t.appendChild(e)}function g(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function y(t){const e=v("style");return function(t,e){w(t.head||t,e)}(g(t),e),e}function _(t,e,n){t.insertBefore(e,n||null)}function m(t){t.parentNode.removeChild(t)}function $(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function v(t){return document.createElement(t)}function x(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function b(t){return document.createTextNode(t)}function z(){return b(" ")}function k(){return b("")}function C(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function P(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function H(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function A(t,e,n){t.classList[n?"add":"remove"](e)}function M(t,e,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,!1,e),r}const B=new Set;let S,O=0;function L(t,e,n,r,i,o,l,s=0){const a=16.666/r;let c="{\n";for(let t=0;t<=1;t+=a){const r=e+(n-e)*o(t);c+=100*t+`%{${l(r,1-r)}}\n`}const u=c+`100% {${l(n,1-n)}}\n}`,h=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${s}`,d=g(t);B.add(d);const p=d.__svelte_stylesheet||(d.__svelte_stylesheet=y(t).sheet),f=d.__svelte_rules||(d.__svelte_rules={});f[h]||(f[h]=!0,p.insertRule(`@keyframes ${h} ${u}`,p.cssRules.length));const w=t.style.animation||"";return t.style.animation=`${w?`${w}, `:""}${h} ${r}ms linear ${i}ms 1 both`,O+=1,h}function V(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-r.length;i&&(t.style.animation=r.join(", "),O-=i,O||h((()=>{O||(B.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),B.clear())})))}function N(t){S=t}function W(){const t=function(){if(!S)throw new Error("Function called outside component initialization");return S}();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const i=M(e,n);r.slice().forEach((e=>{e.call(t,i)}))}}}const E=[],T=[],J=[],j=[],G=Promise.resolve();let I=!1;function R(){I||(I=!0,G.then(Z))}function F(t){J.push(t)}let U=!1;const q=new Set;function Z(){if(!U){U=!0;do{for(let t=0;t<E.length;t+=1){const e=E[t];N(e),D(e.$$)}for(N(null),E.length=0;T.length;)T.pop()();for(let t=0;t<J.length;t+=1){const e=J[t];q.has(e)||(q.add(e),e())}J.length=0}while(E.length);for(;j.length;)j.pop()();I=!1,U=!1,q.clear()}}function D(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(F)}}let K;function Q(){return K||(K=Promise.resolve(),K.then((()=>{K=null}))),K}function X(t,e,n){t.dispatchEvent(M(`${e?"intro":"outro"}${n}`))}const Y=new Set;let tt;function et(){tt={r:0,c:[],p:tt}}function nt(){tt.r||o(tt.c),tt=tt.p}function rt(t,e){t&&t.i&&(Y.delete(t),t.i(e))}function it(t,e,n,r){if(t&&t.o){if(Y.has(t))return;Y.add(t),tt.c.push((()=>{Y.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}const ot={duration:0};function lt(n,r,i,s){let a=r(n,i),c=s?0:1,h=null,d=null,p=null;function w(){p&&V(n,p)}function g(t,e){const n=t.b-c;return e*=Math.abs(n),{a:c,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function y(r){const{delay:i=0,duration:l=300,easing:s=e,tick:y=t,css:_}=a||ot,m={start:u()+i,b:r};r||(m.group=tt,tt.r+=1),h||d?d=m:(_&&(w(),p=L(n,c,r,l,i,s,_)),r&&y(0,1),h=g(m,l),F((()=>X(n,r,"start"))),f((t=>{if(d&&t>d.start&&(h=g(d,l),d=null,X(n,h.b,"start"),_&&(w(),p=L(n,c,h.b,h.duration,0,s,a.css))),h)if(t>=h.end)y(c=h.b,1-c),X(n,h.b,"end"),d||(h.b?w():--h.group.r||o(h.group.c)),h=null;else if(t>=h.start){const e=t-h.start;c=h.a+h.d*s(e/h.duration),y(c,1-c)}return!(!h&&!d)})))}return{run(t){l(a)?Q().then((()=>{a=a(),y(t)})):y(t)},end(){w(),h=d=null}}}function st(t){t&&t.c()}function at(t,e,n,i){const{fragment:s,on_mount:a,on_destroy:c,after_update:u}=t.$$;s&&s.m(e,n),i||F((()=>{const e=a.map(r).filter(l);c?c.push(...e):o(e),t.$$.on_mount=[]})),u.forEach(F)}function ct(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ut(e,n,r,l,s,a,c,u=[-1]){const h=S;N(e);const d=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:s,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(h?h.$$.context:[])),callbacks:i(),dirty:u,skip_bound:!1,root:n.target||h.$$.root};c&&c(d.root);let p=!1;if(d.ctx=r?r(e,n.props||{},((t,n,...r)=>{const i=r.length?r[0]:n;return d.ctx&&s(d.ctx[t],d.ctx[t]=i)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](i),p&&function(t,e){-1===t.$$.dirty[0]&&(E.push(t),R(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],d.update(),p=!0,o(d.before_update),d.fragment=!!l&&l(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(m)}else d.fragment&&d.fragment.c();n.intro&&rt(e.$$.fragment),at(e,n.target,n.anchor,n.customElement),Z()}N(h)}class ht{$destroy(){ct(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function dt(e){let n,r;return{c(){n=x("svg"),r=x("path"),P(r,"d","M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"),P(r,"fill",e[2]),P(n,"width",e[0]),P(n,"height",e[1]),P(n,"viewBox",e[3])},m(t,e){_(t,n,e),w(n,r)},p(t,[e]){4&e&&P(r,"fill",t[2]),1&e&&P(n,"width",t[0]),2&e&&P(n,"height",t[1]),8&e&&P(n,"viewBox",t[3])},i:t,o:t,d(t){t&&m(n)}}}function pt(t,e,n){let{size:r="1em"}=e,{width:i=r}=e,{height:o=r}=e,{color:l="currentColor"}=e,{viewBox:s="0 0 24 24"}=e;return t.$$set=t=>{"size"in t&&n(4,r=t.size),"width"in t&&n(0,i=t.width),"height"in t&&n(1,o=t.height),"color"in t&&n(2,l=t.color),"viewBox"in t&&n(3,s=t.viewBox)},[i,o,l,s,r]}class ft extends ht{constructor(t){super(),ut(this,t,pt,dt,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function wt(e){let n,r;return{c(){n=x("svg"),r=x("path"),P(r,"d","M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"),P(r,"fill",e[2]),P(n,"width",e[0]),P(n,"height",e[1]),P(n,"viewBox",e[3])},m(t,e){_(t,n,e),w(n,r)},p(t,[e]){4&e&&P(r,"fill",t[2]),1&e&&P(n,"width",t[0]),2&e&&P(n,"height",t[1]),8&e&&P(n,"viewBox",t[3])},i:t,o:t,d(t){t&&m(n)}}}function gt(t,e,n){let{size:r="1em"}=e,{width:i=r}=e,{height:o=r}=e,{color:l="currentColor"}=e,{viewBox:s="0 0 24 24"}=e;return t.$$set=t=>{"size"in t&&n(4,r=t.size),"width"in t&&n(0,i=t.width),"height"in t&&n(1,o=t.height),"color"in t&&n(2,l=t.color),"viewBox"in t&&n(3,s=t.viewBox)},[i,o,l,s,r]}class yt extends ht{constructor(t){super(),ut(this,t,gt,wt,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function _t(e){let n,r;return{c(){n=x("svg"),r=x("path"),P(r,"d","M18,16.08C17.24,16.08 16.56,16.38 16.04,16.85L8.91,12.7C8.96,12.47 9,12.24 9,12C9,11.76 8.96,11.53 8.91,11.3L15.96,7.19C16.5,7.69 17.21,8 18,8A3,3 0 0,0 21,5A3,3 0 0,0 18,2A3,3 0 0,0 15,5C15,5.24 15.04,5.47 15.09,5.7L8.04,9.81C7.5,9.31 6.79,9 6,9A3,3 0 0,0 3,12A3,3 0 0,0 6,15C6.79,15 7.5,14.69 8.04,14.19L15.16,18.34C15.11,18.55 15.08,18.77 15.08,19C15.08,20.61 16.39,21.91 18,21.91C19.61,21.91 20.92,20.61 20.92,19A2.92,2.92 0 0,0 18,16.08Z"),P(r,"fill",e[2]),P(n,"width",e[0]),P(n,"height",e[1]),P(n,"viewBox",e[3])},m(t,e){_(t,n,e),w(n,r)},p(t,[e]){4&e&&P(r,"fill",t[2]),1&e&&P(n,"width",t[0]),2&e&&P(n,"height",t[1]),8&e&&P(n,"viewBox",t[3])},i:t,o:t,d(t){t&&m(n)}}}function mt(t,e,n){let{size:r="1em"}=e,{width:i=r}=e,{height:o=r}=e,{color:l="currentColor"}=e,{viewBox:s="0 0 24 24"}=e;return t.$$set=t=>{"size"in t&&n(4,r=t.size),"width"in t&&n(0,i=t.width),"height"in t&&n(1,o=t.height),"color"in t&&n(2,l=t.color),"viewBox"in t&&n(3,s=t.viewBox)},[i,o,l,s,r]}class $t extends ht{constructor(t){super(),ut(this,t,mt,_t,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function vt(e){let n,r;return{c(){n=x("svg"),r=x("path"),P(r,"d","M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M9,8H11V17H9V8M13,8H15V17H13V8Z"),P(r,"fill",e[2]),P(n,"width",e[0]),P(n,"height",e[1]),P(n,"viewBox",e[3])},m(t,e){_(t,n,e),w(n,r)},p(t,[e]){4&e&&P(r,"fill",t[2]),1&e&&P(n,"width",t[0]),2&e&&P(n,"height",t[1]),8&e&&P(n,"viewBox",t[3])},i:t,o:t,d(t){t&&m(n)}}}function xt(t,e,n){let{size:r="1em"}=e,{width:i=r}=e,{height:o=r}=e,{color:l="currentColor"}=e,{viewBox:s="0 0 24 24"}=e;return t.$$set=t=>{"size"in t&&n(4,r=t.size),"width"in t&&n(0,i=t.width),"height"in t&&n(1,o=t.height),"color"in t&&n(2,l=t.color),"viewBox"in t&&n(3,s=t.viewBox)},[i,o,l,s,r]}class bt extends ht{constructor(t){super(),ut(this,t,xt,vt,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function zt(t){const e=t-1;return e*e*e+1}function kt(t){return--t*t*t*t*t+1}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function Ct(t,{delay:e=0,duration:n=400,easing:r=zt,start:i=0,opacity:o=0}={}){const l=getComputedStyle(t),s=+l.opacity,a="none"===l.transform?"":l.transform,c=1-i,u=s*(1-o);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${a} scale(${1-c*e});\n\t\t\topacity: ${s-u*e}\n\t\t`}}function Pt(t){var{fallback:e}=t,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["fallback"]);const i=new Map,o=new Map;function s(t,i,o){return(s,a)=>(t.set(a.key,{rect:s.getBoundingClientRect()}),()=>{if(i.has(a.key)){const{rect:t}=i.get(a.key);return i.delete(a.key),function(t,e,i){const{delay:o=0,duration:s=(t=>30*Math.sqrt(t)),easing:a=zt}=n(n({},r),i),c=e.getBoundingClientRect(),u=t.left-c.left,h=t.top-c.top,d=t.width/c.width,p=t.height/c.height,f=Math.sqrt(u*u+h*h),w=getComputedStyle(e),g="none"===w.transform?"":w.transform,y=+w.opacity;return{delay:o,duration:l(s)?s(f):s,easing:a,css:(t,e)=>`\n\t\t\t\topacity: ${t*y};\n\t\t\t\ttransform-origin: top left;\n\t\t\t\ttransform: ${g} translate(${e*u}px,${e*h}px) scale(${t+(1-t)*d}, ${t+(1-t)*p});\n\t\t\t`}}(t,s,a)}return t.delete(a.key),e&&e(s,a,o)})}return[s(o,i,!1),s(i,o,!0)]}const Ht={kind:"none",player_id:-1,notable:!1},At={kind:"ghost",player_id:-1,notable:!1};function Mt(t,e){return{kind:"piece",player_id:t,notable:e}}const Bt={kind:"unknown"},St={kind:"pawn"},Ot={kind:"vwall"},Lt={kind:"hwall"};class Vt{constructor(t){this.grid_size=t,this.cell_size=2*t+1}isMargin(t){return 0===t||t===this.cell_size-1}isPath(t){return t%2==0&&!this.isMargin(t)}toGridIndex(t,e){let n=Bt;this.isPCell(t,e)?n=St:this.isVCell(t,e)?n=Ot:this.isHCell(t,e)&&(n=Lt);return[n,[Math.floor((t-1)/2),Math.floor((e-1)/2)]]}hasPCell(t){return!this.isMargin(t)&&!this.isPath(t)}isPCell(t,e){return this.hasPCell(e)&&this.hasPCell(t)}getPawn(t,e,n){const[r,[i,o]]=this.toGridIndex(e,n);return"pawn"!==r.kind?Ht:t[i][o]}isVCell(t,e){return this.hasPCell(t)&&this.isPath(e)}getVerticalWall(t,e,n){const[r,[i,o]]=this.toGridIndex(e,n);return"vwall"!==r.kind||i===this.grid_size-1?Ht:t[i][o]}isHCell(t,e){return this.isPath(t)&&this.hasPCell(e)}getHorizontalWall(t,e,n){const[r,[i,o]]=this.toGridIndex(e,n);return"hwall"!==r.kind||o===this.grid_size-1?Ht:t[i][o]}}function Nt(t,e,n){const r=t.slice();return r[14]=e[n],r}function Wt(t,e,n){const r=t.slice();return r[17]=e[n],r[19]=n,r}function Et(t){let e,n,r,i,o,l;const s=[Gt,jt],a=[];function c(t,r){return(null==e||4&r)&&(e=!("piece"!==t[5].getHorizontalWall(t[2],t[14],t[19]).kind)),e?0:((null==n||4&r)&&(n=!("ghost"!==t[5].getHorizontalWall(t[2],t[14],t[19]).kind)),n?1:-1)}return~(r=c(t,-1))&&(i=a[r]=s[r](t)),{c(){i&&i.c(),o=k()},m(t,e){~r&&a[r].m(t,e),_(t,o,e),l=!0},p(t,e){let n=r;r=c(t,e),r===n?~r&&a[r].p(t,e):(i&&(et(),it(a[n],1,1,(()=>{a[n]=null})),nt()),~r?(i=a[r],i?i.p(t,e):(i=a[r]=s[r](t),i.c()),rt(i,1),i.m(o.parentNode,o)):i=null)},i(t){l||(rt(i),l=!0)},o(t){it(i),l=!1},d(t){~r&&a[r].d(t),t&&m(o)}}}function Tt(t){let e,n,r,i,o,l;const s=[Rt,It],a=[];function c(t,r){return(null==e||8&r)&&(e=!("piece"!==t[5].getVerticalWall(t[3],t[14],t[19]).kind)),e?0:((null==n||8&r)&&(n=!("ghost"!==t[5].getVerticalWall(t[3],t[14],t[19]).kind)),n?1:-1)}return~(r=c(t,-1))&&(i=a[r]=s[r](t)),{c(){i&&i.c(),o=k()},m(t,e){~r&&a[r].m(t,e),_(t,o,e),l=!0},p(t,e){let n=r;r=c(t,e),r===n?~r&&a[r].p(t,e):(i&&(et(),it(a[n],1,1,(()=>{a[n]=null})),nt()),~r?(i=a[r],i?i.p(t,e):(i=a[r]=s[r](t),i.c()),rt(i,1),i.m(o.parentNode,o)):i=null)},i(t){l||(rt(i),l=!0)},o(t){it(i),l=!1},d(t){~r&&a[r].d(t),t&&m(o)}}}function Jt(t){let e,n,r,i,o,l;const s=[Ut,Ft],a=[];function c(t,r){return(null==e||16&r)&&(e=!("piece"!==t[5].getPawn(t[4],t[14],t[19]).kind)),e?0:((null==n||16&r)&&(n=!("ghost"!==t[5].getPawn(t[4],t[14],t[19]).kind)),n?1:-1)}return~(r=c(t,-1))&&(i=a[r]=s[r](t)),{c(){i&&i.c(),o=k()},m(t,e){~r&&a[r].m(t,e),_(t,o,e),l=!0},p(t,e){let n=r;r=c(t,e),r===n?~r&&a[r].p(t,e):(i&&(et(),it(a[n],1,1,(()=>{a[n]=null})),nt()),~r?(i=a[r],i?i.p(t,e):(i=a[r]=s[r](t),i.c()),rt(i,1),i.m(o.parentNode,o)):i=null)},i(t){l||(rt(i),l=!0)},o(t){it(i),l=!1},d(t){~r&&a[r].d(t),t&&m(o)}}}function jt(e){let n;return{c(){n=v("div"),P(n,"class","ghost horizontalWall svelte-pic2r5"),A(n,"player0",0===e[0]||e[1]),A(n,"player1",1===e[0]&&!e[1])},m(t,e){_(t,n,e)},p(t,e){3&e&&A(n,"player0",0===t[0]||t[1]),3&e&&A(n,"player1",1===t[0]&&!t[1])},i:t,o:t,d(t){t&&m(n)}}}function Gt(t){let e,n,r;return{c(){e=v("div"),P(e,"class","horizontalWall svelte-pic2r5"),A(e,"player0",0===t[5].getHorizontalWall(t[2],t[14],t[19]).player_id||t[1]),A(e,"player1",1===t[5].getHorizontalWall(t[2],t[14],t[19]).player_id&&!t[1])},m(t,n){_(t,e,n),r=!0},p(t,n){38&n&&A(e,"player0",0===t[5].getHorizontalWall(t[2],t[14],t[19]).player_id||t[1]),38&n&&A(e,"player1",1===t[5].getHorizontalWall(t[2],t[14],t[19]).player_id&&!t[1])},i(t){r||(F((()=>{n||(n=lt(e,Ct,{},!0)),n.run(1)})),r=!0)},o(t){n||(n=lt(e,Ct,{},!1)),n.run(0),r=!1},d(t){t&&m(e),t&&n&&n.end()}}}function It(e){let n,r;return{c(){n=v("div"),P(n,"class",r="ghost verticalWall player"+e[0]+" svelte-pic2r5"),A(n,"player0",0===e[0]||e[1]),A(n,"player1",1===e[0]&&!e[1])},m(t,e){_(t,n,e)},p(t,e){1&e&&r!==(r="ghost verticalWall player"+t[0]+" svelte-pic2r5")&&P(n,"class",r),3&e&&A(n,"player0",0===t[0]||t[1]),3&e&&A(n,"player1",1===t[0]&&!t[1])},i:t,o:t,d(t){t&&m(n)}}}function Rt(t){let e,n,r;return{c(){e=v("div"),P(e,"class","verticalWall svelte-pic2r5"),A(e,"player0",0===t[5].getVerticalWall(t[3],t[14],t[19]).player_id||t[1]),A(e,"player1",1===t[5].getVerticalWall(t[3],t[14],t[19]).player_id&&!t[1])},m(t,n){_(t,e,n),r=!0},p(t,n){42&n&&A(e,"player0",0===t[5].getVerticalWall(t[3],t[14],t[19]).player_id||t[1]),42&n&&A(e,"player1",1===t[5].getVerticalWall(t[3],t[14],t[19]).player_id&&!t[1])},i(t){r||(F((()=>{n||(n=lt(e,Ct,{},!0)),n.run(1)})),r=!0)},o(t){n||(n=lt(e,Ct,{},!1)),n.run(0),r=!1},d(t){t&&m(e),t&&n&&n.end()}}}function Ft(e){let n,r;return{c(){n=v("div"),P(n,"class",r="ghost pawn player"+e[0]+" svelte-pic2r5")},m(t,e){_(t,n,e)},p(t,e){1&e&&r!==(r="ghost pawn player"+t[0]+" svelte-pic2r5")&&P(n,"class",r)},i:t,o:t,d(t){t&&m(n)}}}function Ut(n){let r,i,s,a,c;return{c(){r=v("div"),P(r,"class",i="pawn player"+n[5].getPawn(n[4],n[14],n[19]).player_id+" svelte-pic2r5")},m(t,e){_(t,r,e),c=!0},p(t,e){n=t,(!c||16&e&&i!==(i="pawn player"+n[5].getPawn(n[4],n[14],n[19]).player_id+" svelte-pic2r5"))&&P(r,"class",i)},i(i){c||(F((()=>{a&&a.end(1),s=function(n,r,i){let o,s,a=r(n,i),c=!1,h=0;function d(){o&&V(n,o)}function p(){const{delay:r=0,duration:i=300,easing:l=e,tick:p=t,css:w}=a||ot;w&&(o=L(n,0,1,i,r,l,w,h++)),p(0,1);const g=u()+r,y=g+i;s&&s.abort(),c=!0,F((()=>X(n,!0,"start"))),s=f((t=>{if(c){if(t>=y)return p(1,0),X(n,!0,"end"),d(),c=!1;if(t>=g){const e=l((t-g)/i);p(e,1-e)}}return c}))}let w=!1;return{start(){w||(w=!0,V(n),l(a)?(a=a(),Q().then(p)):p())},invalidate(){w=!1},end(){c&&(d(),c=!1)}}}(r,n[9],{key:n[5].getPawn(n[4],n[14],n[19]).player_id}),s.start()})),c=!0)},o(i){s&&s.invalidate(),a=function(n,r,i){let s,a=r(n,i),c=!0;const h=tt;function d(){const{delay:r=0,duration:i=300,easing:l=e,tick:d=t,css:p}=a||ot;p&&(s=L(n,1,0,i,r,l,p));const w=u()+r,g=w+i;F((()=>X(n,!1,"start"))),f((t=>{if(c){if(t>=g)return d(0,1),X(n,!1,"end"),--h.r||o(h.c),!1;if(t>=w){const e=l((t-w)/i);d(1-e,e)}}return c}))}return h.r+=1,l(a)?Q().then((()=>{a=a(),d()})):d(),{end(t){t&&a.tick&&a.tick(1,0),c&&(s&&V(n,s),c=!1)}}}(r,n[8],{key:n[5].getPawn(n[4],n[14],n[19]).player_id}),c=!1},d(t){t&&m(r),t&&a&&a.end()}}}function qt(t){let e,n,r,i,l=!t[5].isMargin(t[14])&&!t[5].isMargin(t[19]),s=l&&function(t){let e,n,r,i;const o=[Jt,Tt,Et],l=[];return~(n=function(t,e){return t[5].isPCell(t[14],t[19])?0:t[5].isVCell(t[14],t[19])?1:t[5].isHCell(t[14],t[19])?2:-1}(t))&&(r=l[n]=o[n](t)),{c(){e=v("div"),r&&r.c(),P(e,"class","cell svelte-pic2r5")},m(t,r){_(t,e,r),~n&&l[n].m(e,null),i=!0},p(t,e){r&&r.p(t,e)},i(t){i||(rt(r),i=!0)},o(t){it(r),i=!1},d(t){t&&m(e),~n&&l[n].d()}}}(t);return{c(){e=v("div"),s&&s.c(),P(e,"class","svelte-pic2r5"),A(e,"columnPCell",t[5].hasPCell(t[19])),A(e,"columnPath",t[5].isPath(t[19])),A(e,"columnMargin",t[5].isMargin(t[19]))},m(o,l){_(o,e,l),s&&s.m(e,null),n=!0,r||(i=[C(e,"mouseenter",t[6](t[14],t[19])),C(e,"click",t[7](t[14],t[19]))],r=!0)},p(e,n){t=e,l&&s.p(t,n)},i(t){n||(rt(s),n=!0)},o(t){it(s),n=!1},d(t){t&&m(e),s&&s.d(),r=!1,o(i)}}}function Zt(t){let e,n,r,i=Array.from({length:t[5].cell_size},Kt),o=[];for(let e=0;e<i.length;e+=1)o[e]=qt(Wt(t,i,e));const l=t=>it(o[t],1,1,(()=>{o[t]=null}));return{c(){e=v("div");for(let t=0;t<o.length;t+=1)o[t].c();n=z(),P(e,"class","columnContainer svelte-pic2r5"),A(e,"rowPCell",t[5].hasPCell(t[14])),A(e,"rowPath",t[5].isPath(t[14])),A(e,"rowMargin",t[5].isMargin(t[14]))},m(t,i){_(t,e,i);for(let t=0;t<o.length;t+=1)o[t].m(e,null);w(e,n),r=!0},p(t,r){if(255&r){let s;for(i=Array.from({length:t[5].cell_size},Kt),s=0;s<i.length;s+=1){const l=Wt(t,i,s);o[s]?(o[s].p(l,r),rt(o[s],1)):(o[s]=qt(l),o[s].c(),rt(o[s],1),o[s].m(e,n))}for(et(),s=i.length;s<o.length;s+=1)l(s);nt()}32&r&&A(e,"rowPCell",t[5].hasPCell(t[14])),32&r&&A(e,"rowPath",t[5].isPath(t[14])),32&r&&A(e,"rowMargin",t[5].isMargin(t[14]))},i(t){if(!r){for(let t=0;t<i.length;t+=1)rt(o[t]);r=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)it(o[t]);r=!1},d(t){t&&m(e),$(o,t)}}}function Dt(t){let e,n,r=Array.from({length:t[5].cell_size},t[12]),i=[];for(let e=0;e<r.length;e+=1)i[e]=Zt(Nt(t,r,e));const o=t=>it(i[t],1,1,(()=>{i[t]=null}));return{c(){e=v("div");for(let t=0;t<i.length;t+=1)i[t].c();P(e,"class","rowContainer svelte-pic2r5")},m(t,r){_(t,e,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);n=!0},p(t,[n]){if(255&n){let l;for(r=Array.from({length:t[5].cell_size},t[12]),l=0;l<r.length;l+=1){const o=Nt(t,r,l);i[l]?(i[l].p(o,n),rt(i[l],1)):(i[l]=Zt(o),i[l].c(),rt(i[l],1),i[l].m(e,null))}for(et(),l=r.length;l<i.length;l+=1)o(l);nt()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)rt(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)it(i[t]);n=!1},d(t){t&&m(e),$(i,t)}}}const Kt=(t,e)=>e;function Qt(t,e,n){let r,i,o,{grid_size:l=9}=e,{current_player_id:s=0}=e,{option_same_wall_color:a=!1}=e;const c=new Vt(l);let{board:u}=e;const h=W();const[d,p]=Pt({duration:t=>Math.sqrt(700*t),fallback(t){const e=getComputedStyle(t),n="none"===e.transform?"":e.transform;return{duration:6e3,easing:kt,css:t=>`\n\t\t\t\t\ttransform: ${n} scale(${t});\n\t\t\t\t\topacity: ${t}\n\t\t\t\t`}}});return t.$$set=t=>{"grid_size"in t&&n(10,l=t.grid_size),"current_player_id"in t&&n(0,s=t.current_player_id),"option_same_wall_color"in t&&n(1,a=t.option_same_wall_color),"board"in t&&n(11,u=t.board)},t.$$.update=()=>{2048&t.$$.dirty&&n(4,r=u.pawn),2048&t.$$.dirty&&n(3,i=u.vertical_wall),2048&t.$$.dirty&&n(2,o=u.horizontal_wall)},[s,a,o,i,r,c,function(t,e){return()=>{let n,r;[n,r]=c.toGridIndex(t,e),h("hoverCell",{pieceType:n,nextPosition:r,cx:e,cy:t})}},function(t,e){return()=>{let n,r;[n,r]=c.toGridIndex(t,e),h("clickCell",{pieceType:n,nextPosition:r,cx:e,cy:t})}},d,p,l,u,(t,e)=>c.cell_size-e-1]}class Xt extends ht{constructor(t){super(),ut(this,t,Qt,Dt,s,{grid_size:10,current_player_id:0,option_same_wall_color:1,board:11})}}function Yt(t){return"piece"===t.kind}function te(t,e,n){const r=n.pawn.length;if(t>=r-1)return!1;let i=!0;return e>0&&(i=i&&!Yt(n.horizontal_wall[t][e-1])),e<r-1&&(i=i&&!Yt(n.horizontal_wall[t][e])),i}function ee(t,e,n){const r=n.pawn.length;if(0===t)return!1;let i=!0;return e>0&&(i=i&&!Yt(n.horizontal_wall[t-1][e-1])),e<r-1&&(i=i&&!Yt(n.horizontal_wall[t-1][e])),i}function ne(t,e,n){const r=n.pawn.length;if(e===r-1)return!1;let i=!0;return t>0&&(i=i&&!Yt(n.vertical_wall[t-1][e])),t<r-1&&(i=i&&!Yt(n.vertical_wall[t][e])),i}function re(t,e,n){const r=n.pawn.length;if(0===e)return!1;let i=!0;return t>0&&(i=i&&!Yt(n.vertical_wall[t-1][e-1])),t<r-1&&(i=i&&!Yt(n.vertical_wall[t][e-1])),i}function ie(t,e,n){if(t[0]===e[0]&&t[1]===e[1]||Yt(n.pawn[e[0]][e[1]]))return!1;let r=t,i=e;const o=i[0]-r[0],l=i[1]-r[1],s=Math.abs(o)+Math.abs(l);if(1===s)return 0===o?(r[1]<=i[1]||([r,i]=[i,r]),ne(r[0],r[1],n)):(r[0]<=i[0]||([r,i]=[i,r]),te(r[0],r[1],n));if(2===s){if(l*o==0)return 0===o?(r[1]<=i[1]||([r,i]=[i,r]),ne(r[0],r[1],n)&&ne(r[0],r[1]+1,n)&&Yt(n.pawn[r[0]][r[1]+1])):(r[0]<=i[0]||([r,i]=[i,r]),te(r[0],r[1],n)&&te(r[0]+1,r[1],n)&&Yt(n.pawn[r[0]+1][r[1]]));{const t=te(r[0],r[1],n)&&!te(r[0]+1,r[1],n)&&Yt(n.pawn[r[0]+1][r[1]]),e=ee(r[0],r[1],n)&&!ee(r[0]-1,r[1],n)&&Yt(n.pawn[r[0]-1][r[1]]),o=ne(r[0],r[1],n)&&!ne(r[0],r[1]+1,n)&&Yt(n.pawn[r[0]][r[1]+1]),l=re(r[0],r[1],n)&&!re(r[0],r[1]-1,n)&&Yt(n.pawn[r[0]][r[1]-1]);return r[1]<i[1]?r[0]<i[0]?t&&ne(r[0]+1,r[1],n)||o&&te(r[0],r[1]+1,n):e&&ne(r[0]-1,r[1],n)||o&&ee(r[0],r[1]+1,n):r[0]<i[0]?t&&re(r[0]+1,r[1],n)||l&&te(r[0],r[1]-1,n):e&&re(r[0]-1,r[1],n)||l&&ee(r[0],r[1]-1,n)}}return!1}class oe{constructor(t,e=[],n=0){this.grid_size=t;const r=t,i=[...Array(r)].map((()=>Array(r).fill(At))),o=Math.floor(r/2);i[0][o]=Mt(0,!1),i[r-1][o]=Mt(1,!1);const l=[...Array(r-1)].map((()=>Array(r-1).fill(At))),s=[...Array(r-1)].map((()=>Array(r-1).fill(At)));this.board={pawn:i,vertical_wall:l,horizontal_wall:s},this.current_pawn=[[0,o],[r-1,o]],this.goal=[[...Array(r)].map(((t,e)=>[r-1,e])),[...Array(r)].map(((t,e)=>[0,e]))],this.current_player=-1,this.nextTurn(),this.history=e,this.history_index=n}nextTurn(){this.current_player=(this.current_player+1)%2,this.updateGhost(this.current_pawn[this.current_player],this.board)}updateGhost(t,e){!function(t,e){const n=e.pawn.length;for(let r=0;r<n;r++)for(let i=0;i<n;i++)"piece"!==e.pawn[r][i].kind&&(e.pawn[r][i]=ie(t,[r,i],e)?At:Ht)}(this.current_pawn[this.current_player],this.board),function(t,e){const n=e.pawn.length;for(let t=0;t<n-1;t++)for(let r=0;r<n-1;r++)"piece"!==e.vertical_wall[t][r].kind&&(e.vertical_wall[t][r]=At),"piece"!==e.horizontal_wall[t][r].kind&&(e.horizontal_wall[t][r]=At)}(this.current_pawn[this.current_player],this.board)}loadHistory(t,e=-1){const n=JSON.parse(JSON.stringify(this.board)),r=n.pawn.length,i=Math.floor(r/2);let o=[[0,i],[r-1,i]],l=t.split(",");const s=-1===e?l.length:e;for(let t=0;t<l.length;t++){const e=l[t],r=t%2,i=[parseInt(e[1])-1,e[0].codePointAt(0)-"a".codePointAt(0)];let a,c;if(2===e.length)a=St,c=o[r];else if(3===e.length&&"v"===e[2])a=Ot,c=[-1,-1];else{if(3!==e.length||"h"!==e[2])return;a=Lt,c=[-1,-1]}const u={piece:a,to:i,from:c};this.history.push(u),t>=s?"pawn"===a.kind&&(o[r]=i):("pawn"===a.kind?(n.pawn[c[0]][c[1]]=Ht,n.pawn[i[0]][i[1]]=Mt(r,!1),this.current_pawn[r]=i,o[r]=i):"vwall"===a.kind?n.vertical_wall[i[0]][i[1]]=Mt(r,!1):"hwall"===a.kind&&(n.horizontal_wall[i[0]][i[1]]=Mt(r,!1)),this.history_index++)}this.board=n,this.current_player=s%2,this.updateGhost(this.current_pawn[this.current_player],this.board)}handleTurn(t,e){const n=this.current_pawn[this.current_player],[r,i]=e;if("unknown"===t.kind)return!1;if("pawn"===t.kind){if(!ie(n,e,this.board))return!1;const o=JSON.parse(JSON.stringify(this.board.pawn));this.commitHistory(t,e);const[l,s]=n;return o[l][s]=Ht,o[r][i]=Mt(this.current_player,!1),this.board.pawn=o,this.current_pawn[this.current_player]=[r,i],!0}const o=JSON.parse(JSON.stringify(this.board));if("vwall"===t.kind){if(r===this.grid_size-1)return!1;if("piece"===this.board.vertical_wall[r][i].kind)return!1;o.vertical_wall[r][i]=Mt(this.current_player,!1)}else if("hwall"===t.kind){if(i===this.grid_size-1)return!1;if("piece"===this.board.horizontal_wall[r][i].kind)return!1;o.horizontal_wall[r][i]=Mt(this.current_player,!1)}return function(t,e,n){const r=n.pawn.length;for(let t=0;t<r-1;t++)for(let e=0;e<r-1;e++){if(Yt(n.vertical_wall[t][e])&&Yt(n.horizontal_wall[t][e]))return!1;if(t!==r-2&&Yt(n.vertical_wall[t][e])&&Yt(n.vertical_wall[t+1][e]))return!1;if(e!==r-2&&Yt(n.horizontal_wall[t][e])&&Yt(n.horizontal_wall[t][e+1]))return!1}let i;function o(t,e){i[t][e]||(i[t][e]=!0,te(t,e,n)&&o(t+1,e),ee(t,e,n)&&o(t-1,e),ne(t,e,n)&&o(t,e+1),re(t,e,n)&&o(t,e-1))}for(let n=0;n<t.length;n++){let l=!1;const s=t[n],a=e[n];i=[...Array(r)].map((()=>Array(r).fill(!1))),o(s[0],s[1]);for(let t=0;t<a.length;t++){const[e,n]=a[t];!0===i[e][n]&&(l=!0)}if(!l)return!1}return!0}(this.current_pawn,this.goal,o)?(this.commitHistory(t,e),this.board=o,!0):void 0}commitHistory(t,e){const n=this.current_pawn[this.current_player],r=this.history.slice(0,this.history_index);this.history_index++,r.push({piece:t,from:n,to:e}),this.history=r}previousStep(){if(this.history_index-1<0)return!1;this.history_index--;const t=this.history[this.history_index],e=t.piece.kind,[n,r]=t.from,[i,o]=t.to;if("pawn"===e){const t=(this.current_player+1)%2,e=JSON.parse(JSON.stringify(this.board.pawn));e[i][o]=Ht,e[n][r]=Mt(t,!1),this.board.pawn=e,this.current_pawn[t]=[n,r]}else"vwall"===e?this.board.vertical_wall[i][o]=Ht:"hwall"===e&&(this.board.horizontal_wall[i][o]=Ht);return!0}nextStep(){if(this.history_index+1>this.history.length)return!1;const t=this.history[this.history_index],e=t.piece.kind,[n,r]=t.from,[i,o]=t.to;if("pawn"===e){const t=JSON.parse(JSON.stringify(this.board.pawn));t[n][r]=Ht,t[i][o]=Mt(this.current_player,!1),this.board.pawn=t,this.current_pawn[this.current_player]=[i,o]}else"vwall"===e?this.board.vertical_wall[i][o]=Mt(this.current_player,!1):"hwall"===e&&(this.board.horizontal_wall[i][o]=Mt(this.current_player,!1));return this.history_index++,!0}dumpHistory(){const t=[];for(let e=0;e<this.history.length;e++){const n=this.history[e];let r="";r+=String.fromCharCode("a".charCodeAt(0)+n.to[1]),r+=n.to[0]+1,"vwall"===n.piece.kind?r+="v":"hwall"===n.piece.kind&&(r+="h"),t.push(r)}return t}dumpStep(){return this.history.length!==this.history_index?this.history_index:-1}}const le=t=>({}),se=t=>({copy:t[2]});function ae(t){let e,n,r;const i=t[4].default,o=function(t,e,n,r){if(t){const i=a(t,e,n,r);return t[0](i)}}(i,t,t[3],se);return{c(){o&&o.c(),e=z(),n=v("textarea"),n.value=t[0],P(n,"class","svelte-w8w2mp")},m(i,l){o&&o.m(i,l),_(i,e,l),_(i,n,l),t[5](n),r=!0},p(t,[e]){o&&o.p&&(!r||8&e)&&function(t,e,n,r,i,o){if(i){const l=a(e,n,r,o);t.p(l,i)}}(o,i,t,t[3],r?function(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|i[r];return t}return e.dirty|i}return e.dirty}(i,t[3],e,le):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[3]),se),(!r||1&e)&&(n.value=t[0])},i(t){r||(rt(o,t),r=!0)},o(t){it(o,t),r=!1},d(r){o&&o.d(r),r&&m(e),r&&m(n),t[5](null)}}}function ce(t,e,n){let{$$slots:r={},$$scope:i}=e;const o=W();let l,{text:s}=e;return t.$$set=t=>{"text"in t&&n(0,s=t.text),"$$scope"in t&&n(3,i=t.$$scope)},[s,l,async function(){l.select(),document.execCommand("Copy"),await(R(),G),l.blur(),o("copy")},i,r,function(t){T[t?"unshift":"push"]((()=>{l=t,n(1,l)}))}]}class ue extends ht{constructor(t){super(),ut(this,t,ce,ae,s,{text:0})}}function he(e){let n,r,i,o,l;return r=new bt({}),{c(){n=v("button"),st(r.$$.fragment),P(n,"class","svelte-o7x0i7")},m(t,s){_(t,n,s),at(r,n,null),i=!0,o||(l=C(n,"click",e[12]),o=!0)},p:t,i(t){i||(rt(r.$$.fragment,t),i=!0)},o(t){it(r.$$.fragment,t),i=!1},d(t){t&&m(n),ct(r),o=!1,l()}}}function de(t){let e,n;return e=new ue({props:{text:t[6],$$slots:{default:[pe,({copy:t})=>({18:t}),({copy:t})=>t?262144:0]},$$scope:{ctx:t}}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,n){const r={};64&n&&(r.text=t[6]),786432&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(rt(e.$$.fragment,t),n=!0)},o(t){it(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function pe(t){let e,n,r,i,o;return n=new $t({}),{c(){e=v("button"),st(n.$$.fragment),P(e,"class","svelte-o7x0i7")},m(s,a){_(s,e,a),at(n,e,null),r=!0,i||(o=C(e,"click",(function(){l(t[18])&&t[18].apply(this,arguments)})),i=!0)},p(e,n){t=e},i(t){r||(rt(n.$$.fragment,t),r=!0)},o(t){it(n.$$.fragment,t),r=!1},d(t){t&&m(e),ct(n),i=!1,o()}}}function fe(t){let e,n,r=t[5].dumpHistory()+"";return{c(){e=v("p"),n=b(r),H(e,"margin-top","0px"),P(e,"class","svelte-o7x0i7")},m(t,r){_(t,e,r),w(e,n)},p(t,e){32&e&&r!==(r=t[5].dumpHistory()+"")&&function(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}(n,r)},d(t){t&&m(e)}}}function we(t){let e,n,r,i,l,s,a,c,u,h,d,p,f,g,y;n=new Xt({props:{grid_size:t[0],current_player_id:t[8],board:t[7]}}),n.$on("clickCell",t[9]),s=new ft({}),u=new yt({});let $=t[3]&&he(t),x=t[2]&&de(t),b=t[4]&&fe(t);return{c(){e=v("div"),st(n.$$.fragment),r=z(),i=v("div"),l=v("button"),st(s.$$.fragment),a=z(),c=v("button"),st(u.$$.fragment),$&&$.c(),h=k(),x&&x.c(),d=z(),p=v("div"),b&&b.c(),H(e,"width",t[1]),P(e,"class","board svelte-o7x0i7"),P(l,"class","svelte-o7x0i7"),P(c,"class","svelte-o7x0i7"),H(i,"width",t[1]),H(p,"width",t[1])},m(o,m){_(o,e,m),at(n,e,null),_(o,r,m),_(o,i,m),w(i,l),at(s,l,null),w(l,a),w(i,c),at(u,c,null),$&&$.m(i,null),w(i,h),x&&x.m(i,null),_(o,d,m),_(o,p,m),b&&b.m(p,null),f=!0,g||(y=[C(l,"click",t[11]),C(c,"click",t[10])],g=!0)},p(t,[r]){const o={};1&r&&(o.grid_size=t[0]),256&r&&(o.current_player_id=t[8]),128&r&&(o.board=t[7]),n.$set(o),(!f||2&r)&&H(e,"width",t[1]),t[3]?$?($.p(t,r),8&r&&rt($,1)):($=he(t),$.c(),rt($,1),$.m(i,h)):$&&(et(),it($,1,1,(()=>{$=null})),nt()),t[2]?x?(x.p(t,r),4&r&&rt(x,1)):(x=de(t),x.c(),rt(x,1),x.m(i,null)):x&&(et(),it(x,1,1,(()=>{x=null})),nt()),(!f||2&r)&&H(i,"width",t[1]),t[4]?b?b.p(t,r):(b=fe(t),b.c(),b.m(p,null)):b&&(b.d(1),b=null),(!f||2&r)&&H(p,"width",t[1])},i(t){f||(rt(n.$$.fragment,t),rt(s.$$.fragment,t),rt(u.$$.fragment,t),rt($),rt(x),f=!0)},o(t){it(n.$$.fragment,t),it(s.$$.fragment,t),it(u.$$.fragment,t),it($),it(x),f=!1},d(t){t&&m(e),ct(n),t&&m(r),t&&m(i),ct(s),ct(u),$&&$.d(),x&&x.d(),t&&m(d),t&&m(p),b&&b.d(),g=!1,o(y)}}}function ge(t,e,n){let r,i,o,l,{board_size:s="500px"}=e,{grid_size:a=9}=e,{history_:c=null}=e,{step_:u=-1}=e,{showCopy:h=!1}=e,{showClear:d=!1}=e,{showHistory:p=!1}=e,{loadFromUrl:f=!1}=e,w=new oe(a);const g=new URLSearchParams(window.location.search);if(!1===f)w.loadHistory(c,u);else if(g.has("history")){const t=g.get("history"),e=g.has("step")?parseInt(g.get("step")):-1;w.loadHistory(t,e),console.log(t)}return t.$$set=t=>{"board_size"in t&&n(1,s=t.board_size),"grid_size"in t&&n(0,a=t.grid_size),"history_"in t&&n(13,c=t.history_),"step_"in t&&n(14,u=t.step_),"showCopy"in t&&n(2,h=t.showCopy),"showClear"in t&&n(3,d=t.showClear),"showHistory"in t&&n(4,p=t.showHistory),"loadFromUrl"in t&&n(15,f=t.loadFromUrl)},t.$$.update=()=>{32&t.$$.dirty&&n(0,a=w.grid_size),32&t.$$.dirty&&n(8,r=w.current_player),32&t.$$.dirty&&n(7,i=w.board),32&t.$$.dirty&&n(16,o=w.dumpStep()<0?"":"&step="+w.dumpStep()),65568&t.$$.dirty&&n(6,l=window.location.origin+window.location.pathname+"?history="+w.dumpHistory()+o)},[a,s,h,d,p,w,l,i,r,function(t){const e=t.detail.pieceType,r=t.detail.nextPosition;w.handleTurn(e,r)&&(w.nextTurn(),n(5,w))},function(){w.nextStep()&&(w.nextTurn(),n(5,w))},function(){w.previousStep()&&(w.nextTurn(),n(5,w))},function(){n(5,w=new oe(a))},c,u,f,o]}class ye extends ht{constructor(t){super(),ut(this,t,ge,we,s,{board_size:1,grid_size:0,history_:13,step_:14,showCopy:2,showClear:3,showHistory:4,loadFromUrl:15})}}function _e(e){let n,r,i,o;return i=new ye({props:{grid_size:9,board_size:"100%",showCopy:!0,showClear:!0,loadFromUrl:!0,showHistory:!0}}),{c(){n=v("div"),r=v("div"),st(i.$$.fragment),P(r,"class","content svelte-12pvbpr"),P(n,"class","container svelte-12pvbpr")},m(t,e){_(t,n,e),w(n,r),at(i,r,null),o=!0},p:t,i(t){o||(rt(i.$$.fragment,t),o=!0)},o(t){it(i.$$.fragment,t),o=!1},d(t){t&&m(n),ct(i)}}}return new class extends ht{constructor(t){super(),ut(this,t,null,_e,s,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
